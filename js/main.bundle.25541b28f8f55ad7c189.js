!function(){"use strict";var e={91:function(e){e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},811:function(e,t,a){e.exports=a.p+"img/medicine-logo2a4aa1c883a46f932ea9.png"},972:function(e,t,a){e.exports=a.p+"img/red-cross83ddb8b5a6a097a2083d.png"}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.m=e,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"}(),a.b=document.baseURI||self.location.href,function(){var e=a(91),t=a.n(e),n=new URL(a(811),a.b),o=new URL(a(972),a.b);t()(n),t()(o),document.querySelector(".form-select-status").addEventListener("change",(function(e){e.target&&e.target.value&&document.querySelectorAll("card").forEach(((t,a)=>{t.dataset.status===e.target.value||"Status"===e.target.value?t.style.display="block":t.style.display="none"}))})),document.querySelector(".form-select-priority").addEventListener("change",(function(e){e.target&&e.target.value&&document.querySelectorAll("card").forEach(((t,a)=>{t.dataset.priority===e.target.value||"Priority"===e.target.value?t.style.display="block":t.style.display="none"}))})),document.querySelector(".btn-search-filter").addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".search-filter"),a=document.querySelectorAll("card");a.forEach(((e,n)=>{e.querySelector(".card-header").innerText.toLowerCase().includes(t.value.toLowerCase())||e.querySelector(".card-text").innerText.toLowerCase().includes(t.value.toLowerCase())?a[n].style.display="block":a[n].style.display="none"}))}));const s=document.getElementById("login-succees"),r=document.getElementById("login-btn"),i=document.getElementById("add-btn"),d=document.getElementById("welcome"),c=document.getElementById("exampleModal"),l=document.querySelector(".modal-footer"),u=document.getElementById("exampleFormControlInput1"),m=document.getElementById("inputPassword2");let h=document.createElement("span");r.addEventListener("click",(()=>{u.value="",m.value="",h.remove()}));function p(e){localStorage.setItem("token",e),fetch("https://ajax.test-danit.com/api/v2/cards",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>(r.remove(),i.classList.remove("d-none"),i.classList.add("d-flex"),d.classList.remove("d-none"),d.classList.add("d-block"),d.innerText=`Welcome ${localStorage.email}`,void c.remove())))}const v=document.querySelector(".cards"),y=document.querySelector(".input-cardiologist"),g=document.querySelector(".input-terapist"),b=document.querySelector(".input-dentist"),f=document.getElementById("modal-foote-edit"),S=document.getElementById("close-modal"),x=document.getElementById("inputGroupSelect01"),E=document.getElementById("inputGroupSelectPriority"),L=document.querySelector(".input-group-text-goal"),T=document.querySelector(".input-group-decrp"),w=document.querySelector(".input-group-name"),q=document.querySelector(".input-dantist-date"),j=document.querySelector(".input-terapist-age"),k=document.querySelector(".input-cardiologist-standart"),A=document.querySelector(".input-cardiologist-mass"),B=document.querySelector(".input-cardiologist-diseases"),$=document.querySelector(".modal-body-doctor"),C=document.querySelector(".modal-body-goal"),I=document.querySelector(".modal-body-fullName"),M=document.querySelector(".modal-body-priority"),P=document.querySelector(".modal-body-date"),O=document.querySelector(".modal-body-age"),z=document.querySelector(".modal-body-standart"),N=document.querySelector(".modal-body-mass"),U=document.querySelector(".modal-body-diseases"),R=document.querySelector(".modal-body-description");function _(){if(0===v.children.length){const e=document.createElement("div");e.innerText="No items have been added",v.appendChild(e)}else{const e=v.querySelector(":first-child");"No items have been added"===e.innerText&&v.removeChild(e)}}y.classList.add("d-none"),g.classList.add("d-none");const J=document.getElementById("add-btn"),D=document.getElementById("add-btn-succes");function F(){fetch("https://ajax.test-danit.com/api/v2/cards",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`}}).then((e=>e.json())).then((e=>(new H).renderFromServer(e)))}J.addEventListener("click",(()=>{D.classList.remove("d-none"),L.value="",T.value="",w.value="",q.value="",j.value="",k.value="",A.value="",B.value=""})),q.addEventListener("input",(function(e){const t=e.target.value.replace(/(\d{2})(\d{2})(\d{4})/,"$1.$2.$3");q.value=t}));const G=["date","age","standart","bodymass","diseases"];class H{constructor(e,t,a,n,o,s,r,i,d,c){this.doctor=e,this.priority=t,this.goal=a,this.description=n,this.name=o,this.date=s,this.age=r,this.standart=i,this.bodymass=d,this.diseases=c,this.status="open"}render(e){let t=document.createElement("card");t.dataset.priority=e.priority,t.dataset.status=e.status;const a=document.createElement("div");this.statusIcon=a,a.classList.add("status-icon"),a.classList.add(e.status),a.innerHTML='       <svg\n    xmlns="http://www.w3.org/2000/svg"\n    width="16"\n    height="16"\n    fill="currentColor"\n    class="bi bi-check-circle"\n    viewBox="0 0 16 16"\n    >\n    <path\n    d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"\n    />\n    <path\n    d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"\n    />\n    </svg> ';const n=document.createElement("a");this.removeButton=n,n.setAttribute("type","button"),n.setAttribute("class","btn-close button-delete-card btn-close-white"),n.setAttribute("disabled",""),n.setAttribute("aria-label","Close");const o=document.createElement("a");this.showMoreButton=o,o.setAttribute("class","btn show-card-button btn-outline-danger"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#showMore"),o.innerText="Show more";const s=document.createElement("a");this.editButton=s,s.setAttribute("class","btn edit-card-button btn-outline-success"),s.setAttribute("data-bs-toggle","modal"),s.setAttribute("data-bs-target","#exampleModalReg"),s.setAttribute("data-bs-target","#exampleModalReg"),s.innerText="Edit",t.innerHTML=`\n          <div class="card text-white bg-dark mb-3" style="max-width: 18rem">\n          <div class="card-header  ${e.priority}">${e.doctor}\n          </div>\n          <div class="card-body">\n          <h5 class="card-title">${e.goal}</h5>\n          <p class="card-text">\n          ${e.description}\n          </p>\n          </div>\n          </div>\n          `,t.append(n,o,s,a),v.append(t),this.remover(e,t),this.statusCard(e,a,t),this.edit(e,t),this.showMoreModal(e),_()}renderFromServer(e){e.forEach((e=>{this.render(e)}))}addCards(){"cardiologist"===this.doctor?this.cardiologist("https://ajax.test-danit.com/api/v2/cards","POST",this.priority,this.goal,this.description,this.name,this.standart,this.bodymass,this.diseases,this.status).then((e=>e.json())).then((e=>this.render(e))):"dentist"===this.doctor?this.dentist("https://ajax.test-danit.com/api/v2/cards","POST",this.priority,this.goal,this.description,this.name,this.date,this.status).then((e=>e.json())).then((e=>this.render(e))):"therapist"===this.doctor&&this.therapist("https://ajax.test-danit.com/api/v2/cards","POST",this.priority,this.goal,this.description,this.name,this.age,this.status).then((e=>e.json())).then((e=>this.render(e)))}cardiologist(e,t,a,n,o,s,r,i,d,c){return fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify({status:c,title:"Визит к кардиологу",description:"Плановый визит",doctor:"Cardiologist",priority:a,goal:n,description:o,name:s,standart:r,bodymass:i,diseases:d})})}therapist(e,t,a,n,o,s,r,i){return fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify({status:i,title:"Визит к терапевту",description:"Плановый визит",doctor:"Therapist",priority:a,goal:n,description:o,name:s,age:r})})}dentist(e,t,a,n,o,s,r,i){return fetch(e,{method:t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify({status:i,title:"Визит к стомотологу",description:"Плановый визит",doctor:"Dentist",priority:a,goal:n,description:o,name:s,date:r})})}remover(e,t){this.removeButton.addEventListener("click",(()=>{t.remove(),fetch(`https://ajax.test-danit.com/api/v2/cards/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.token}`}}).then((()=>{t.remove(),_()})).catch((e=>{console.error(e)}))}))}statusCard(e,t,a){this.statusIcon.addEventListener("click",(()=>{e.status="done",fetch(`https://ajax.test-danit.com/api/v2/cards/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.token}`},body:JSON.stringify(e)}).then((()=>{t.classList.remove("open"),t.classList.add("done")}))}))}edit(e,t){this.editButton.addEventListener("click",(()=>{D.classList.add("d-none");const a=document.createElement("button");a.setAttribute("type","submit"),a.setAttribute("class","btn btn-outline-success"),a.setAttribute("data-bs-toggle","modal"),a.setAttribute("data-bs-target","#exampleModalReg"),a.innerText="Save",f.append(a),Q(e,G),x.value=e.doctor.toLowerCase(),E.value=e.priority,L.value=e.goal,T.value=e.description,w.value=e.name,q.value=e.date,j.value=e.age,k.value=e.standart,A.value=e.bodymass,B.value=e.diseases,this.saveChanges(e,a,t)}))}saveChanges(e,t,a){t.addEventListener("click",(()=>{e.status,a.innerHTML=`\n    <div class="card text-white bg-dark mb-3" style="max-width: 18rem">\n    <div class="card-header  ${e.priority}">${e.doctor}\n    </div>\n    <div class="card-body">\n    <h5 class="card-title">${e.goal}</h5>\n    <p class="card-text">\n    ${e.description}\n    </p>\n      </div>\n  </div>\n  `,a.remove(),t.remove(),"cardiologist"===x.value?(console.log("ssoosos"),this.cardiologist(`https://ajax.test-danit.com/api/v2/cards/${e.id}`,"PUT",E.value,L.value,T.value,w.value,k.value,A.value,B.value,e.status).then((e=>e.json())).then((e=>this.render(e)))):"dentist"===x.value?this.dentist(`https://ajax.test-danit.com/api/v2/cards/${e.id}`,"PUT",E.value,L.value,T.value,w.value,q.value,e.status).then((e=>e.json())).then((e=>this.render(e))):"therapist"===x.value&&this.therapist(`https://ajax.test-danit.com/api/v2/cards/${e.id}`,"PUT",E.value,L.value,T.value,w.value,j.value,e.status).then((e=>e.json())).then((e=>this.render(e)))})),S.addEventListener("click",(()=>{t.remove()}))}showMoreModal(e){this.showMoreButton.addEventListener("click",(()=>{Q(e,G),$.innerText=e.doctor,C.innerText=e.goal,I.innerText=e.name,M.innerText=e.priority,P.innerText=e.date,O.innerText=e.age,z.innerText=e.standart,N.innerText=e.bodymass,U.innerText=e.diseases,R.innerText=e.description}))}}function Q(e,t){return t.forEach((function(t){e.hasOwnProperty(t)||(e[t]="-")})),e}_(),localStorage.token&&p(localStorage.token),s.addEventListener("click",(()=>{document.querySelector(".modal-backdrop").remove(),fetch("https://ajax.test-danit.com/api/v2/cards/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.value,password:m.value})}).then((e=>function(e,t){if(401!==e.status)return localStorage.clear(),localStorage.setItem("email",t),h.remove(),e.text();h=document.createElement("span"),h.innerText="Email or Password incorrect.",h.classList.add("login__error"),l.append(h)}(e,u.value))).then((e=>p(e))).then((e=>F()))})),F(),function(){const e=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(e).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}(),x.addEventListener("click",(()=>{"cardiologist"===x.value?(b.classList.add("d-none"),y.classList.remove("d-none")):"therapist"===x.value?(g.classList.remove("d-none"),b.classList.add("d-none"),y.classList.add("d-none")):"dentist"===x.value&&(b.classList.remove("d-none"),y.classList.add("d-none"),g.classList.add("d-none"))})),D.addEventListener("click",(()=>{_(),new H(x.value,E.value,L.value,T.value,w.value,q.value,j.value,k.value,A.value,B.value).addCards()}))}()}();